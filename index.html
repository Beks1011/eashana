<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ 1-11 –∫–ª–∞—Å—Å—ã</title>
<script src="https://cdn.tailwindcss.com"></script>
<style>
body{margin:0;font-family:Arial,Helvetica,sans-serif;background:linear-gradient(135deg,#a8e6cf,#dcedc1);overflow:hidden}
.header{display:flex;align-items:center;justify-content:center;gap:10px;margin-top:10px;position:relative}
h1{font-size:3rem;color:#064420;padding:10px 30px;border-radius:20px;margin:0;background:rgba(255,255,255,0.9);box-shadow:0 4px 12px rgba(0,0,0,0.1)}
.arrow-menu{cursor:pointer;background:rgba(255,255,255,0.9);padding:6px 10px;border-radius:12px;box-shadow:2px 2px 6px rgba(0,0,0,.2);position:absolute;left:10px;top:50%;transform:translateY(-50%);z-index:1002}
.menu-items{position:absolute;top:60px;left:10px;background:rgba(255,255,255,0.95);padding:10px;border-radius:12px;box-shadow:2px 2px 10px rgba(0,0,0,.3);z-index:1000;display:none;width:260px}
.menu-items button{display:block;width:100%;margin-bottom:6px;padding:10px;border-radius:12px;border:none;background:#064420;color:#fff;font-weight:600;cursor:pointer;transition:all 0.2s}
.menu-items button:hover{background:#046936}
#authInfo{padding:6px 4px;border-radius:6px;margin-bottom:6px;color:#111;background:transparent}
.time-container{position:fixed;top:10px;right:10px;z-index:1000;background:rgba(255,255,255,0.9);padding:6px 12px;border-radius:12px;box-shadow:0 2px 6px rgba(0,0,0,.2);text-align:center;font-weight:700}
#clock{font-size:1.2rem}
#birthdayWidget{position:fixed;top:10px;left:60px;min-width:220px;height:80px;background:rgba(255,255,255,0.9);border-radius:20px;box-shadow:0 0 12px rgba(0,0,0,.25);padding:6px;z-index:1003;display:none;align-items:center;gap:10px}
#birthdayWidget img{width:70px;height:70px;object-fit:cover;border-radius:15px}
.birthday-info{display:flex;flex-direction:column;font-size:13px;font-weight:500}
.schedule-wrapper{width:100%;overflow:hidden;margin-top:12px;height:calc(100vh - 120px);position:relative;display:none}
.schedule-container{display:flex;gap:16px;padding:12px;height:100%;transition:transform .45s cubic-bezier(.2,.9,.2,1)}
.schedule-card{background:rgba(255,255,255,0.9);padding:16px;border-radius:24px;box-shadow:0 8px 20px rgba(0,0,0,.1);width:45%;min-width:45%;flex-shrink:0;display:flex;flex-direction:column;overflow:hidden;transition:transform 0.2s}
.schedule-card:hover{transform:scale(1.02)}
.schedule-card h3{text-align:center;margin:0 0 8px 0;font-size:1.3rem;color:#064420;font-weight:700}
table{width:100%;border-collapse:collapse;table-layout:fixed;font-size:0.9rem}
th,td{border:1px solid #ccc;text-align:center;vertical-align:middle;padding:6px;border-radius:8px}
th{background:#046936;color:#fff}
td select, td input{width:100%;padding:6px;font-size:0.85rem;border-radius:6px;border:1px solid #ccc;box-sizing:border-box}
.arrow-nav{position:absolute;top:50%;transform:translateY(-50%);background:rgba(255,255,255,0.9);padding:12px;border-radius:50%;cursor:pointer;box-shadow:2px 2px 6px rgba(0,0,0,.15);font-size:1.5rem;z-index:1001}
.arrow-left{left:8px}
.arrow-right{right:8px}
.popup{display:none;position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);background:rgba(255,255,255,0.95);padding:20px;border-radius:20px;box-shadow:0 0 20px rgba(0,0,0,.3);z-index:1004;width:360px;max-width:92%}
.popup input, .popup button, .popup select, .popup textarea{margin:6px 0;padding:10px;border-radius:10px;border:1px solid #bdbdbd;box-sizing:border-box;width:100%;font-size:14px}
.btn{padding:10px 14px;border-radius:12px;border:none;background:#064420;color:#fff;cursor:pointer;font-weight:600;transition:all 0.2s}
.btn.gray{background:#046936;color:#fff}
.btn:hover{opacity:0.85}
.center{display:flex;justify-content:center;gap:8px;margin-top:8px}
.sep{height:8px;border:none}
.hidden-prelogin{display:none}
label.small{font-size:0.85rem;color:#333}
</style>
</head>
<body>

<div class="header">
  <div class="arrow-menu" id="menuArrow" title="–ú–µ–Ω—é">‚ò∞</div>
  <h1>–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ 1-11 –∫–ª–∞—Å—Å—ã</h1>
  <!-- –ù–∞–∑–≤–∞–Ω–∏–µ —à–∫–æ–ª—ã -->
  <div style="position:absolute; bottom:-30px; width:100%; text-align:center; font-size:1rem; color:#064420; font-weight:500;">
    –ö–ì–£ ¬´–û–±—â–µ–æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω–∞—è —à–∫–æ–ª–∞ ‚Ññ33 –æ—Ç–¥–µ–ª–∞ –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è –≥. –£—Ä–∞–ª—å—Å–∫ –£–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è –∞–∫–∏–º–∞—Ç–∞ –ó–∞–ø–∞–¥–Ω–æ-–ö–∞–∑–∞—Ö—Å—Ç–∞–Ω—Å–∫–æ–π –æ–±–ª–∞—Å—Ç–∏¬ª
  </div>
  <div class="menu-items" id="menuItems" aria-hidden="true">
    <div id="authInfo" style="display:none"></div>
    <button id="saveBtn" class="hidden-prelogin btn">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
    <button id="resetBtn" class="hidden-prelogin btn gray">–û—á–∏—Å—Ç–∏—Ç—å</button>
    <button id="birthdayBtn" class="hidden-prelogin btn">–î–µ–Ω—å —Ä–æ–∂–¥–µ–Ω–∏—è</button>
    <button id="autoScrollBtn" class="hidden-prelogin btn gray">–ê–≤—Ç–æ–ø—Ä–æ–∫—Ä—É—Ç–∫–∞</button>
    <button id="fullscreenBtn" class="hidden-prelogin btn gray">–†–∞—Å—à–∏—Ä–∏—Ç—å/–ù–∞–∑–∞–¥</button>
    <button id="addClassBtn" class="hidden-prelogin btn">–î–æ–±–∞–≤–∏—Ç—å –∫–ª–∞—Å—Å</button>
    <button id="selectClassesBtn" class="hidden-prelogin btn gray">–í—ã–±—Ä–∞—Ç—å –∫–ª–∞—Å—Å—ã</button>
    <hr class="sep">
    <button id="createAdminBtn" class="hidden-prelogin btn gray" style="display:none">–°–æ–∑–¥–∞—Ç—å –∞–¥–º–∏–Ω-–∞–∫–∫</button>
    <button id="createSchoolBtn" class="hidden-prelogin btn gray" style="display:none">–°–æ–∑–¥–∞—Ç—å –∞–∫–∫ —à–∫–æ–ª—ã</button>
    <button id="logoutBtn" class="hidden-prelogin btn gray" style="display:none">–í—ã–π—Ç–∏</button>
  </div>
</div>

<div class="time-container" id="timeContainer">
  <span id="clock">00:00:00</span><br><span id="dateText"></span>
</div>

<div id="birthdayWidget" role="region" aria-label="–í–∏–¥–∂–µ—Ç –¥–Ω—è —Ä–æ–∂–¥–µ–Ω–∏—è" style="display:none">
  <img id="birthdayPhoto" src="" alt="–§–æ—Ç–æ">
  <div class="birthday-info">
    <div id="birthdayName"></div>
    <div id="birthdayDate"></div>
    <div id="birthdayCongrats">üéâ –¢—É“ì–∞–Ω –∫“Ø–Ω—ñ“£–º–µ–Ω! üéâ</div>
  </div>
  <button id="deleteBirthday" class="btn gray" style="height:32px;align-self:flex-start">–£–¥–∞–ª–∏—Ç—å</button>
</div>

<div class="schedule-wrapper" id="scheduleWrapper" role="main" style="display:none">
  <div class="arrow-nav arrow-left" id="prevBtn" aria-label="–ü—Ä–µ–¥—ã–¥—É—â–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞">‚óÄ</div>
  <div class="arrow-nav arrow-right" id="nextBtn" aria-label="–°–ª–µ–¥—É—é—â–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞">‚ñ∂</div>
  <div class="schedule-container" id="scheduleContainer" aria-live="polite"></div>
</div>

<div class="popup" id="loginPopup" role="dialog" aria-modal="true" style="display:block">
  <h3>–í—Ö–æ–¥</h3>
  <input id="loginUsername" placeholder="–ò–º—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –∏–ª–∏ –Ω–æ–º–µ—Ä —à–∫–æ–ª—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, 47)" />
  <input id="loginPassword" type="password" placeholder="–ü–∞—Ä–æ–ª—å" />
  <div class="center">
    <button id="loginBtn" class="btn">–í–æ–π—Ç–∏</button>
  </div>
  <p style="font-size:13px;color:#666;margin-top:8px">–ê–¥–º–∏–Ω ‚Äî –ø–æ–ª–Ω—ã–π –ª–æ–≥–∏–Ω. –î–ª—è —à–∫–æ–ª—ã –≤–≤–æ–¥–∏—Ç–µ —Ç–æ–ª—å–∫–æ –Ω–æ–º–µ—Ä.</p>
</div>

<script>
// === –¢–≤–æ–π JS –∫–æ–¥ –æ—Å—Ç–∞–≤–ª–µ–Ω –ø–æ–ª–Ω–æ—Å—Ç—å—é –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π ===
const LS_SCHEDULE = "scheduleData_v1";
const LS_VISIBLE = "visibleClasses_v1";
const LS_BDAY = "birthdayData_v1";
const LS_USERS = "users_v1";
const LS_CURRENT = "current_user_v1";
const subjects = ["", "–ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞","–û—Ä—ã—Å —Ç—ñ–ª—ñ","“ö–∞–∑–∞“õ —Ç—ñ–ª—ñ","–§–∏–∑–∏–∫–∞","–•–∏–º–∏—è","–ë–∏–æ–ª–æ–≥–∏—è","–¢–∞—Ä–∏—Ö","–ì–µ–æ–≥—Ä–∞—Ñ–∏—è","–î–µ–Ω–µ —à—ã–Ω—ã“õ—Ç—ã—Ä—É","“ö–æ–ª”©–Ω–µ—Ä","–ú—É–∑—ã–∫–∞","–ò–Ω—Ñ–æ—Ä–º–∞—Ç–∏–∫–∞","–ê“ì—ã–ª—à—ã–Ω —Ç—ñ–ª—ñ","“ö–æ“ì–∞–º—Ç–∞–Ω—É"];
const letters = ["–ê","–ë","–í"];
let allClasses=[], scheduleData={}, visibleClasses=[], pageIndex=0, autoScroll=true;
try { const saved = localStorage.getItem(LS_SCHEDULE); if(saved) scheduleData = JSON.parse(saved); } catch(e){ scheduleData = {}; }
try { const savedV = localStorage.getItem(LS_VISIBLE); if(savedV) visibleClasses = JSON.parse(savedV); } catch(e){ visibleClasses = []; }
for(let i=1;i<=11;i++){letters.forEach(l=>{const cls=`${i}${l}`;allClasses.push(cls);if(!scheduleData[cls]){scheduleData[cls]={"–ü–Ω":[],"–í—Ç":[],"–°—Ä":[],"–ß—Ç":[],"–ü—Ç":[]};for(const d in scheduleData[cls]) for(let k=0;k<8;k++) scheduleData[cls][d].push({subject:"",room:""});}})}
if(!visibleClasses || visibleClasses.length===0) visibleClasses=[...allClasses];
let users={};
try{users=JSON.parse(localStorage.getItem(LS_USERS)||"{}");}catch(e){users={}}
if(Object.keys(users).length===0){users["–ë–µ–∫–∞—Ä—ã—Å –ú–∞–¥–µ–Ω–∏–µ—Ç–æ–≤ –ê–±–∏–ª–∫–∞—Å—ã–º–æ–≤–∏—á"]={password:"12345678910",role:"admin",displayName:"–ë–µ–∫–∞—Ä—ã—Å –ú–∞–¥–µ–Ω–∏–µ—Ç–æ–≤ –ê–±–∏–ª–∫–∞—Å—ã–º–æ–≤–∏—á"}; users["school_47"]={password:"abc",role:"school",displayName:"–®–∫–æ–ª–∞ ‚Ññ47",schoolNumber:"47"}; localStorage.setItem(LS_USERS,JSON.stringify(users));}
let currentUser=null; try{currentUser=JSON.parse(localStorage.getItem(LS_CURRENT)||"null");}catch(e){currentUser=null;}
function saveAll(){if(!currentUser) return; const userKey=currentUser.username; try{const userData={schedule:scheduleData,visible:visibleClasses}; localStorage.setItem("user_"+userKey,JSON.stringify(userData)); localStorage.setItem(LS_SCHEDULE,JSON.stringify(scheduleData)); localStorage.setItem(LS_VISIBLE,JSON.stringify(visibleClasses));}catch(e){console.warn("Save failed",e);}}
function showBirthdayWidget(name,date,photo){document.getElementById('birthdayPhoto').src=photo;document.getElementById('birthdayName').textContent=name;document.getElementById('birthdayDate').textContent=date;document.getElementById('birthdayWidget').style.display='flex';}
function clearBirthdayWidget(){document.getElementById('birthdayWidget').style.display='none';}
function updateMenuVisibility(){const isLogged=!!currentUser; document.querySelectorAll('.hidden-prelogin').forEach(el=>el.style.display=isLogged?'block':'none'); const createAdminBtn=document.getElementById('createAdminBtn'); const createSchoolBtn=document.getElementById('createSchoolBtn'); const logoutBtn=document.getElementById('logoutBtn'); const authInfo=document.getElementById('authInfo'); if(isLogged){authInfo.style.display='block'; authInfo.textContent=`–í–æ—à—ë–ª: ${currentUser.displayName||currentUser.username}`; logoutBtn.style.display='block'; if(currentUser.role==='admin'){createAdminBtn.style.display='block'; createSchoolBtn.style.display='block';} else {createAdminBtn.style.display='none'; createSchoolBtn.style.display='none';}} else {authInfo.style.display='none'; authInfo.textContent=''; logoutBtn.style.display='none'; createAdminBtn.style.display='none'; createSchoolBtn.style.display='none';}}
function showMainUIAfterLogin(){document.getElementById('scheduleWrapper').style.display='block'; try{const b=localStorage.getItem(LS_BDAY); if(b){const o=JSON.parse(b); if(o && o.name) showBirthdayWidget(o.name,o.date,o.photo);}}catch(e){} try{if(currentUser){const userKey=currentUser.username; const userData=JSON.parse(localStorage.getItem("user_"+userKey)||"{}"); if(userData.schedule)scheduleData=userData.schedule; if(userData.visible)visibleClasses=userData.visible;}}catch(e){} updateMenuVisibility(); refreshVisibility(); updateSchedulePosition();}
function updateClock(){const now=new Date();const h=String(now.getHours()).padStart(2,'0');const m=String(now.getMinutes()).padStart(2,'0');const s=String(now.getSeconds()).padStart(2,'0');document.getElementById('clock').textContent=`${h}:${m}:${s}`;document.getElementById('dateText').textContent=`${now.getDate()}.${now.getMonth()+1}.${now.getFullYear()}`;}
setInterval(updateClock,1000);updateClock();

// ... –æ—Å—Ç–∞–ª—å–Ω–æ–π JS –∫–æ–¥ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–æ—Ö—Ä–∞–Ω—ë–Ω, –∫–∞–∫ —É —Ç–µ–±—è
</script>

</body>
</html>

