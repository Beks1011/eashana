<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>Расписание 1–11 классы</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<script src="https://cdn.tailwindcss.com"></script>

<style>
body{
  margin:0;
  font-family:Arial,Helvetica,sans-serif;
  background:linear-gradient(135deg,#a8e6cf,#dcedc1);
}
.header{text-align:center;padding:10px;position:relative}
h1{background:white;display:inline-block;padding:10px 30px;border-radius:20px}
.school-name{margin-top:6px;background:white;padding:6px 14px;border-radius:12px;display:none}

.menu-btn{position:absolute;left:10px;top:15px;cursor:pointer;background:white;padding:8px 12px;border-radius:10px}
.menu{position:absolute;left:10px;top:60px;background:white;padding:10px;border-radius:12px;display:none;width:220px}
.menu button{width:100%;margin-bottom:6px;padding:8px;border-radius:8px;background:#064420;color:white;border:none}

.schedule{display:none;padding:10px;overflow:hidden}
.cards{display:flex;gap:20px;transition:0.4s}
.card{background:white;border-radius:20px;padding:10px;width:45%;min-width:45%}
.card h3{text-align:center;font-weight:bold}

table{width:100%;border-collapse:collapse}
th,td{border:1px solid #ccc;padding:4px;text-align:center}
th{background:#046936;color:white}

.nav{position:fixed;top:50%;background:white;padding:10px;border-radius:50%;cursor:pointer}
.left{left:5px}
.right{right:5px}

.login{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);
background:white;padding:20px;border-radius:20px;width:300px}
.login input{width:100%;margin-bottom:10px;padding:8px}
</style>
</head>

<body>

<div class="header">
  <div class="menu-btn" id="menuBtn">☰</div>
  <h1>Расписание 1–11 классы</h1>
  <div class="school-name" id="schoolName"></div>

  <div class="menu" id="menu">
    <button onclick="save()">Сохранить</button>
    <button onclick="clearAll()">Очистить</button>
    <button onclick="toggleAuto()">Автопрокрутка</button>
    <button onclick="logout()">Выйти</button>
  </div>
</div>

<div class="schedule" id="schedule">
  <div class="nav left" onclick="prev()">◀</div>
  <div class="nav right" onclick="next()">▶</div>
  <div class="cards" id="cards"></div>
</div>

<div class="login" id="login">
  <h3>Вход</h3>
  <input id="user" placeholder="логин или номер школы">
  <input id="pass" type="password" placeholder="пароль">
  <button onclick="login()">Войти</button>
</div>

<script>
const users={
  admin:{pass:"1234",role:"admin"},
  "school_33":{
    pass:"33",
    role:"school",
    name:"КГУ «Общеобразовательная школа №33 отдела образования г. Уральск Управления образования акимата Западно-Казахстанской области»"
  }
}

let current=null
let auto=true
let page=0

const subjects=["","Математика","Қазақ тілі","Орыс тілі","Физика","Химия","Биология","История"]

const classes=[]
for(let i=1;i<=11;i++)["А","Б"].forEach(l=>classes.push(i+l))

let data=JSON.parse(localStorage.getItem("data")||"{}")

function login(){
  let u=user.value.trim()
  let p=pass.value.trim()
  let key=users[u]?u:"school_"+u
  if(!users[key]||users[key].pass!==p){alert("Ошибка");return}
  current={key,...users[key]}
  loginDiv.style.display="none"
  schedule.style.display="block"
  if(current.role==="school"){
    schoolName.innerText=current.name
    schoolName.style.display="block"
  }
  render()
}

function render(){
  cards.innerHTML=""
  classes.forEach(c=>{
    if(!data[c]) data[c]=Array(6).fill(0).map(()=>Array(5).fill(""))
    let html=`<div class="card"><h3>${c}</h3><table><tr><th>#</th><th>Пн</th><th>Вт</th><th>Ср</th><th>Чт</th><th>Пт</th></tr>`
    for(let i=0;i<6;i++){
      html+=`<tr><td>${i+1}</td>`
      for(let d=0;d<5;d++){
        html+=`<td><select onchange="setVal('${c}',${i},${d},this.value)">`
        subjects.forEach(s=>html+=`<option ${data[c][i][d]==s?"selected":""}>${s}</option>`)
        html+=`</select></td>`
      }
      html+="</tr>"
    }
    html+="</table></div>"
    cards.innerHTML+=html
  })
  move()
}

function setVal(c,i,d,v){data[c][i][d]=v}
function save(){localStorage.setItem("data",JSON.stringify(data));alert("Сохранено")}
function clearAll(){if(confirm("Очистить?")){data={};render()}}
function toggleAuto(){auto=!auto}
function logout(){localStorage.clear();location.reload()}

function move(){cards.style.transform=`translateX(${-page*50}%)`}
function next(){page++;move()}
function prev(){page=Math.max(0,page-1);move()}

setInterval(()=>{if(auto)next()},5000)

menuBtn.onclick=()=>menu.style.display=menu.style.display=="block"?"none":"block"
</script>

</body>
</html>

